<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Employee Management Dashboard</title>
  <script src="/_sdk/element_sdk.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/ag-grid-community@31.0.3/styles/ag-grid.css">
  <link rel="stylesheet" href="https://unpkg.com/ag-grid-community@31.0.3/styles/ag-theme-alpine.css">
  <script src="https://unpkg.com/ag-grid-community@31.0.3/dist/ag-grid-community.min.js"></script>
  <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            width: 100%;
            height: 100%;
            overflow-x: hidden;
        }

        * {
            box-sizing: border-box;
        }

        .dashboard-container {
            width: 100%;
            min-height: 100%;
            padding: 32px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .dashboard-header {
            text-align: center;
            margin-bottom: 32px;
            color: #ffffff;
        }

        .dashboard-title {
            font-size: 36px;
            font-weight: 700;
            margin: 0 0 8px 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .dashboard-subtitle {
            font-size: 16px;
            font-weight: 400;
            margin: 0;
            opacity: 0.9;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 24px;
        }

        .stat-card {
            background: #ffffff;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 12px rgba(0,0,0,0.15);
        }

        .stat-label {
            font-size: 14px;
            color: #64748b;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: #1e293b;
        }

        .grid-container {
            background: #ffffff;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .grid-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 16px;
        }

        .grid-title {
            font-size: 20px;
            font-weight: 600;
            color: #1e293b;
        }

        .grid-controls {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .search-box {
            padding: 10px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            outline: none;
            transition: border-color 0.2s ease;
            min-width: 200px;
        }

        .search-box:focus {
            border-color: #667eea;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            outline: none;
        }

        .btn-primary {
            background: #667eea;
            color: #ffffff;
        }

        .btn-primary:hover {
            background: #5568d3;
        }

        .btn-secondary {
            background: #f1f5f9;
            color: #475569;
        }

        .btn-secondary:hover {
            background: #e2e8f0;
        }

        .ag-theme-alpine {
            --ag-header-background-color: #f8fafc;
            --ag-header-foreground-color: #1e293b;
            --ag-border-color: #e2e8f0;
            --ag-row-hover-color: #f8fafc;
            --ag-selected-row-background-color: #ede9fe;
        }

        .ag-theme-alpine .ag-header-cell-label {
            font-weight: 600;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 16px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-active {
            background: #dcfce7;
            color: #166534;
        }

        .status-cancelled {
            background: #fee2e2;
            color: #991b1b;
        }

        @media (max-width: 768px) {
            .dashboard-container {
                padding: 16px;
            }

            .dashboard-title {
                font-size: 24px;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .grid-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .grid-controls {
                width: 100%;
            }

            .search-box {
                width: 100%;
            }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <main id="app">
   <div class="dashboard-container">
    <div class="dashboard-header">
     <h1 id="dashboard-title" class="dashboard-title">Employee Management Dashboard</h1>
     <p id="dashboard-subtitle" class="dashboard-subtitle">Comprehensive employee data and analytics</p>
    </div>
    <div class="stats-grid">
     <div class="stat-card">
      <div class="stat-label">
       Total Employees
      </div>
      <div id="total-employees" class="stat-value">
       20
      </div>
     </div>
     <div class="stat-card">
      <div class="stat-label">
       Active Employees
      </div>
      <div id="active-employees" class="stat-value">
       19
      </div>
     </div>
     <div class="stat-card">
      <div class="stat-label">
       Total Payroll
      </div>
      <div id="total-payroll" class="stat-value">
       $1.7M
      </div>
     </div>
     <div class="stat-card">
      <div class="stat-label">
       Avg Salary
      </div>
      <div id="avg-salary" class="stat-value">
       $85K
      </div>
     </div>
    </div>
    <div class="grid-container">
     <div class="grid-header">
      <h2 class="grid-title">Employee Records</h2>
      <div class="grid-controls"><input id="search-input" type="text" class="search-box" placeholder="Search across all columns..." oninput="onSearch(event)"> <button class="btn btn-secondary" onclick="onClearFilters()"> Clear Filters </button> <button class="btn btn-primary" onclick="onExportCSV()"> Export CSV </button>
      </div>
     </div>
     <div id="myGrid" class="ag-theme-alpine" style="height: 600px; width: 100%;"></div>
    </div>
   </div>
  </main>
  <script>
        const defaultConfig = {
            dashboard_title: "Employee Management Dashboard",
            subtitle: "Comprehensive employee data and analytics"
        };

        let currentConfig = {...defaultConfig};
        let gridApi = null;

        // Employee data
        const employeeData = [
            {
                "id": 1,
                "firstName": "John",
                "lastName": "Smith",
                "email": "john.smith@company.com",
                "department": "Engineering",
                "position": "Senior Developer",
                "salary": 95000,
                "hireDate": "2021-03-15",
                "age": 32,
                "location": "New York",
                "performanceRating": 4.2,
                "projectsCompleted": 12,
                "isActive": true,
                "skills": "JavaScript, React, Node.js",
                "manager": "Sarah Johnson"
            },
            {
                "id": 2,
                "firstName": "Emily",
                "lastName": "Davis",
                "email": "emily.davis@company.com",
                "department": "Marketing",
                "position": "Marketing Manager",
                "salary": 78000,
                "hireDate": "2020-07-22",
                "age": 29,
                "location": "Los Angeles",
                "performanceRating": 4.5,
                "projectsCompleted": 8,
                "isActive": true,
                "skills": "Digital Marketing, SEO, Analytics",
                "manager": "Michael Brown"
            },
            {
                "id": 3,
                "firstName": "Michael",
                "lastName": "Brown",
                "email": "michael.brown@company.com",
                "department": "Marketing",
                "position": "VP Marketing",
                "salary": 125000,
                "hireDate": "2019-01-10",
                "age": 38,
                "location": "Los Angeles",
                "performanceRating": 4.7,
                "projectsCompleted": 15,
                "isActive": true,
                "skills": "Strategy, Leadership, Brand Management",
                "manager": "None"
            },
            {
                "id": 4,
                "firstName": "Sarah",
                "lastName": "Johnson",
                "email": "sarah.johnson@company.com",
                "department": "Engineering",
                "position": "Engineering Manager",
                "salary": 115000,
                "hireDate": "2018-11-05",
                "age": 35,
                "location": "New York",
                "performanceRating": 4.6,
                "projectsCompleted": 18,
                "isActive": true,
                "skills": "Team Leadership, Architecture, Python",
                "manager": "David Wilson"
            },
            {
                "id": 5,
                "firstName": "David",
                "lastName": "Wilson",
                "email": "david.wilson@company.com",
                "department": "Engineering",
                "position": "CTO",
                "salary": 180000,
                "hireDate": "2017-05-12",
                "age": 42,
                "location": "New York",
                "performanceRating": 4.8,
                "projectsCompleted": 25,
                "isActive": true,
                "skills": "Technical Strategy, Leadership, Cloud Architecture",
                "manager": "None"
            },
            {
                "id": 6,
                "firstName": "Lisa",
                "lastName": "Garcia",
                "email": "lisa.garcia@company.com",
                "department": "Sales",
                "position": "Sales Representative",
                "salary": 65000,
                "hireDate": "2022-02-28",
                "age": 26,
                "location": "Chicago",
                "performanceRating": 3.9,
                "projectsCompleted": 6,
                "isActive": true,
                "skills": "CRM, Negotiation, Customer Relations",
                "manager": "Robert Martinez"
            },
            {
                "id": 7,
                "firstName": "Robert",
                "lastName": "Martinez",
                "email": "robert.martinez@company.com",
                "department": "Sales",
                "position": "Sales Manager",
                "salary": 92000,
                "hireDate": "2020-09-14",
                "age": 34,
                "location": "Chicago",
                "performanceRating": 4.3,
                "projectsCompleted": 11,
                "isActive": true,
                "skills": "Sales Strategy, Team Management, B2B Sales",
                "manager": "Jennifer Lee"
            },
            {
                "id": 8,
                "firstName": "Jennifer",
                "lastName": "Lee",
                "email": "jennifer.lee@company.com",
                "department": "Sales",
                "position": "VP Sales",
                "salary": 135000,
                "hireDate": "2019-06-18",
                "age": 40,
                "location": "Chicago",
                "performanceRating": 4.6,
                "projectsCompleted": 16,
                "isActive": true,
                "skills": "Strategic Sales, Leadership, Market Analysis",
                "manager": "None"
            },
            {
                "id": 9,
                "firstName": "James",
                "lastName": "Anderson",
                "email": "james.anderson@company.com",
                "department": "HR",
                "position": "HR Specialist",
                "salary": 58000,
                "hireDate": "2021-08-30",
                "age": 28,
                "location": "Austin",
                "performanceRating": 4.0,
                "projectsCompleted": 7,
                "isActive": true,
                "skills": "Recruitment, Employee Relations, HRIS",
                "manager": "Karen White"
            },
            {
                "id": 10,
                "firstName": "Karen",
                "lastName": "White",
                "email": "karen.white@company.com",
                "department": "HR",
                "position": "HR Manager",
                "salary": 85000,
                "hireDate": "2019-12-02",
                "age": 36,
                "location": "Austin",
                "performanceRating": 4.4,
                "projectsCompleted": 13,
                "isActive": true,
                "skills": "HR Strategy, Policy Development, Leadership",
                "manager": "None"
            },
            {
                "id": 11,
                "firstName": "Alex",
                "lastName": "Thompson",
                "email": "alex.thompson@company.com",
                "department": "Engineering",
                "position": "Junior Developer",
                "salary": 72000,
                "hireDate": "2023-01-16",
                "age": 24,
                "location": "New York",
                "performanceRating": 3.8,
                "projectsCompleted": 4,
                "isActive": true,
                "skills": "Java, Spring Boot, MySQL",
                "manager": "Sarah Johnson"
            },
            {
                "id": 12,
                "firstName": "Maria",
                "lastName": "Rodriguez",
                "email": "maria.rodriguez@company.com",
                "department": "Finance",
                "position": "Financial Analyst",
                "salary": 68000,
                "hireDate": "2021-11-08",
                "age": 30,
                "location": "Miami",
                "performanceRating": 4.1,
                "projectsCompleted": 9,
                "isActive": true,
                "skills": "Financial Modeling, Excel, SAP",
                "manager": "Thomas Clark"
            },
            {
                "id": 13,
                "firstName": "Thomas",
                "lastName": "Clark",
                "email": "thomas.clark@company.com",
                "department": "Finance",
                "position": "Finance Manager",
                "salary": 98000,
                "hireDate": "2018-04-25",
                "age": 37,
                "location": "Miami",
                "performanceRating": 4.5,
                "projectsCompleted": 14,
                "isActive": true,
                "skills": "Financial Planning, Budget Management, Leadership",
                "manager": "None"
            },
            {
                "id": 14,
                "firstName": "Amanda",
                "lastName": "Taylor",
                "email": "amanda.taylor@company.com",
                "department": "Marketing",
                "position": "Content Specialist",
                "salary": 55000,
                "hireDate": "2022-06-12",
                "age": 25,
                "location": "Los Angeles",
                "performanceRating": 3.7,
                "projectsCompleted": 5,
                "isActive": true,
                "skills": "Content Writing, Social Media, Adobe Creative",
                "manager": "Michael Brown"
            },
            {
                "id": 15,
                "firstName": "Ryan",
                "lastName": "Miller",
                "email": "ryan.miller@company.com",
                "department": "Engineering",
                "position": "DevOps Engineer",
                "salary": 88000,
                "hireDate": "2020-10-19",
                "age": 31,
                "location": "Seattle",
                "performanceRating": 4.3,
                "projectsCompleted": 10,
                "isActive": true,
                "skills": "AWS, Docker, Kubernetes",
                "manager": "Sarah Johnson"
            },
            {
                "id": 16,
                "firstName": "Jessica",
                "lastName": "Moore",
                "email": "jessica.moore@company.com",
                "department": "Sales",
                "position": "Account Executive",
                "salary": 75000,
                "hireDate": "2021-04-03",
                "age": 27,
                "location": "Denver",
                "performanceRating": 4.0,
                "projectsCompleted": 8,
                "isActive": false,
                "skills": "Account Management, Salesforce, Presentation",
                "manager": "Robert Martinez"
            },
            {
                "id": 17,
                "firstName": "Daniel",
                "lastName": "Harris",
                "email": "daniel.harris@company.com",
                "department": "Finance",
                "position": "Senior Accountant",
                "salary": 73000,
                "hireDate": "2019-08-14",
                "age": 33,
                "location": "Miami",
                "performanceRating": 4.2,
                "projectsCompleted": 12,
                "isActive": true,
                "skills": "Accounting, Tax Preparation, QuickBooks",
                "manager": "Thomas Clark"
            },
            {
                "id": 18,
                "firstName": "Nicole",
                "lastName": "Jackson",
                "email": "nicole.jackson@company.com",
                "department": "HR",
                "position": "Recruiter",
                "salary": 62000,
                "hireDate": "2022-09-05",
                "age": 29,
                "location": "Austin",
                "performanceRating": 3.9,
                "projectsCompleted": 6,
                "isActive": true,
                "skills": "Talent Acquisition, LinkedIn Recruiter, Interviewing",
                "manager": "Karen White"
            },
            {
                "id": 19,
                "firstName": "Kevin",
                "lastName": "Wright",
                "email": "kevin.wright@company.com",
                "department": "Engineering",
                "position": "QA Engineer",
                "salary": 76000,
                "hireDate": "2020-12-07",
                "age": 30,
                "location": "Seattle",
                "performanceRating": 4.1,
                "projectsCompleted": 11,
                "isActive": true,
                "skills": "Test Automation, Selenium, API Testing",
                "manager": "Sarah Johnson"
            },
            {
                "id": 20,
                "firstName": "Stephanie",
                "lastName": "Lopez",
                "email": "stephanie.lopez@company.com",
                "department": "Marketing",
                "position": "Digital Marketing Specialist",
                "salary": 64000,
                "hireDate": "2021-12-20",
                "age": 26,
                "location": "Phoenix",
                "performanceRating": 3.8,
                "projectsCompleted": 7,
                "isActive": true,
                "skills": "Google Ads, Facebook Ads, Email Marketing",
                "manager": "Michael Brown"
            }
        ];

        // Column definitions
        const columnDefs = [
            { 
                field: 'id', 
                headerName: 'ID', 
                filter: 'agNumberColumnFilter',
                pinned: 'left',
                width: 80,
                cellStyle: { fontWeight: '600' }
            },
            { 
                field: 'firstName', 
                headerName: 'First Name', 
                filter: 'agTextColumnFilter',
                width: 130
            },
            { 
                field: 'lastName', 
                headerName: 'Last Name', 
                filter: 'agTextColumnFilter',
                width: 130
            },
            { 
                field: 'email', 
                headerName: 'Email', 
                filter: 'agTextColumnFilter',
                width: 220
            },
            { 
                field: 'department', 
                headerName: 'Department', 
                filter: 'agSetColumnFilter',
                width: 140
            },
            { 
                field: 'position', 
                headerName: 'Position', 
                filter: 'agTextColumnFilter',
                width: 180
            },
            { 
                field: 'salary', 
                headerName: 'Salary', 
                filter: 'agNumberColumnFilter',
                width: 130,
                type: 'numericColumn',
                valueFormatter: params => '$' + params.value.toLocaleString(),
                cellStyle: { fontWeight: '600' }
            },
            { 
                field: 'hireDate', 
                headerName: 'Hire Date', 
                filter: 'agDateColumnFilter',
                width: 130
            },
            { 
                field: 'age', 
                headerName: 'Age', 
                filter: 'agNumberColumnFilter',
                width: 90,
                type: 'numericColumn'
            },
            { 
                field: 'location', 
                headerName: 'Location', 
                filter: 'agSetColumnFilter',
                width: 130
            },
            { 
                field: 'performanceRating', 
                headerName: 'Rating', 
                filter: 'agNumberColumnFilter',
                width: 110,
                type: 'numericColumn',
                cellRenderer: params => {
                    const rating = params.value;
                    const color = rating >= 4.5 ? '#10b981' : rating >= 4.0 ? '#f59e0b' : '#64748b';
                    return '<span style="color: ' + color + '; font-weight: 600;">‚≠ê ' + rating.toFixed(1) + '</span>';
                }
            },
            { 
                field: 'projectsCompleted', 
                headerName: 'Projects', 
                filter: 'agNumberColumnFilter',
                width: 110,
                type: 'numericColumn'
            },
            { 
                field: 'isActive', 
                headerName: 'Status', 
                filter: 'agSetColumnFilter',
                width: 110,
                cellRenderer: params => {
                    const statusClass = params.value ? 'status-active' : 'status-cancelled';
                    const statusText = params.value ? 'Active' : 'Inactive';
                    return '<span class="status-badge ' + statusClass + '">' + statusText + '</span>';
                }
            },
            { 
                field: 'skills', 
                headerName: 'Skills', 
                filter: 'agTextColumnFilter',
                width: 250
            },
            { 
                field: 'manager', 
                headerName: 'Manager', 
                filter: 'agTextColumnFilter',
                width: 150
            }
        ];

        // Grid options
        const gridOptions = {
            columnDefs: columnDefs,
            rowData: employeeData,
            defaultColDef: {
                sortable: true,
                filter: true,
                resizable: true,
                floatingFilter: true
            },
            rowSelection: 'multiple',
            animateRows: true,
            pagination: true,
            paginationPageSize: 10,
            paginationPageSizeSelector: [10, 20, 50, 100],
            enableRangeSelection: true,
            suppressRowClickSelection: true,
            rowHeight: 50,
            onGridReady: (params) => {
                gridApi = params.api;
            }
        };

        // Calculate and update statistics
        function updateStats() {
            const totalEmployees = employeeData.length;
            const totalPayroll = employeeData.reduce((sum, row) => sum + row.salary, 0);
            const activeEmployees = employeeData.filter(row => row.isActive).length;
            const avgSalary = totalEmployees > 0 ? totalPayroll / totalEmployees : 0;
            
            document.getElementById('total-employees').textContent = totalEmployees;
            document.getElementById('active-employees').textContent = activeEmployees;
            document.getElementById('total-payroll').textContent = '$' + (totalPayroll / 1000000).toFixed(1) + 'M';
            document.getElementById('avg-salary').textContent = '$' + (avgSalary / 1000).toFixed(0) + 'K';
        }

        function onSearch(event) {
            if (gridApi) {
                gridApi.setGridOption('quickFilterText', event.target.value);
            }
        }

        function onExportCSV() {
            if (gridApi) {
                gridApi.exportDataAsCsv({
                    fileName: 'employee-dashboard-export.csv'
                });
            }
        }

        function onClearFilters() {
            if (gridApi) {
                gridApi.setFilterModel(null);
                document.getElementById('search-input').value = '';
            }
        }

        function updateContent() {
            document.getElementById('dashboard-title').textContent = currentConfig.dashboard_title || defaultConfig.dashboard_title;
            document.getElementById('dashboard-subtitle').textContent = currentConfig.subtitle || defaultConfig.subtitle;
        }

        // Initialize Element SDK
        if (window.elementSdk) {
            window.elementSdk.init({
                defaultConfig,
                onConfigChange: async (newConfig) => {
                    currentConfig = newConfig;
                    updateContent();
                },
                mapToCapabilities: (config) => ({
                    recolorables: [],
                    borderables: [],
                    fontEditable: undefined,
                    fontSizeable: undefined
                }),
                mapToEditPanelValues: (config) => new Map([
                    ["dashboard_title", config.dashboard_title || defaultConfig.dashboard_title],
                    ["subtitle", config.subtitle || defaultConfig.subtitle]
                ])
            });
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', () => {
            const gridDiv = document.querySelector('#myGrid');
            agGrid.createGrid(gridDiv, gridOptions);
            updateStats();
            updateContent();
        });
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a699150a5f28b06',t:'MTc2NDQ5NzU1OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>